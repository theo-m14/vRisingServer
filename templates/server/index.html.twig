{% extends 'base.html.twig' %}

{% block title %}Accueil
{% endblock %}

{% block body %}
	{% for error in app.session.flashbag.get('error') %}
		<p class="error">{{ error }}</p>
	{% endfor %}
	<div class='main-content'>
		<div class='search-container'>
			<form action="{{path('app_server_search')}}" method='post'>
				<div>
					<label for="name">Nom</label>
					<input type="text" name="name" id="name">
				</div>
				<div>
					<label for="type">Type de Serveur</label>
					<select name="type" id="type">
						<option value="all">TOUS</option>
						<option value="pve">PVE</option>
						<option value="pvp">PVP</option>
					</select>
				</div>
				<div>
					<label for="openDate">Date de lancement</label>
					<select name="openDate" id="openDate">
						<option value="all">Toutes</option>
						<option value="past">Passée</option>
						<option value="incomming">A venir</option>
					</select>
				</div>
				<div>
					<label for="wipe">Reset Serveur</label>
					<select name="wipe" id="openDate">
						<option value="all"></option>
						<option value="with">Avec</option>
						<option value="without">Sans</option>
					</select>
				</div>
				<div>
					<label for="discord">Serveur Discord</label>
					<select name="discord" id="openDate">
						<option value="all"></option>
						<option value="with">Avec</option>
						<option value="without">Sans</option>
					</select>
				</div>
				<div>
					<label for="clan_size">Taille clan</label>
					<select name="clan_size" id="">
						<option value="all">Toutes</option>
						<option value="1">Solo</option>
						<option value="2">Duo</option>
						<option value="3">Trio</option>
						<option value="4">Squad</option>
					</select>
				</div>
				<div>
					<label for="">Tri par note</label>
					<select name="note" id="">
						<option value="asc">Croissant</option>
						<option value="desc">Décroissant</option>
					</select>
				</div>
				<div>
					<label for="">Nombre d'avis</label>
					<select name="review" id="">
						<option value="asc">Croissant</option>
						<option value="desc">Décroissant</option>
					</select>
				</div>
				<button type="submit">Chercher</button>
			</form>
		</div>
		<div class='server-container'>
			{% for server in servers %}
				<div>
					{{server.name}}
					{{server.type ? 'PVP' : 'PVE'}}
					<p>{{server.description}}</p>
					{% if server.userOwner == app.user %}
						<a href="{{path('app_server_edit', {'id' : server.id})}}">Editer</a>
					{% endif %}
					<a href="{{path('app_server_readOne', {'id' : server.id})}}">Détails</a>
				</div>
			{% endfor %}
		</div>
	</div>
{% endblock %}
